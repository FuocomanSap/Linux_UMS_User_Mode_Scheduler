\doxysection{Headers/ums\+\_\+user\+\_\+library.h File Reference}
\label{ums__user__library_8h}\index{Headers/ums\_user\_library.h@{Headers/ums\_user\_library.h}}


This library contains the definitions of every function that can be used from user space to interact with the U\+MS Scheduler device.  


{\ttfamily \#include \char`\"{}Common.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}user\+\_\+struct.\+h\char`\"{}}\newline
{\ttfamily \#include $<$asm-\/generic/errno-\/base.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
Include dependency graph for ums\+\_\+user\+\_\+library.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d3/dd0/ums__user__library_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{d8/d9a/ums__user__library_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{ums__user__library_8h_a9ad1757f50aea33c152d3523c56c7533}} 
\#define {\bfseries D\+E\+B\+U\+G\+\_\+\+U\+S\+E\+R\+\_\+\+M\+\_\+\+V\+AR}~0
\item 
\#define \textbf{ D\+E\+B\+U\+G\+\_\+\+U\+S\+E\+R\+\_\+\+D\+O\+\_\+\+P\+P\+R\+I\+N\+TF}(fmt, ...)
\begin{DoxyCompactList}\small\item\em function used by the library to print debug msgs \end{DoxyCompactList}\item 
\#define \textbf{ D\+E\+B\+U\+G\+\_\+\+U\+S\+E\+R\+\_\+\+D\+O\+\_\+\+P\+R\+I\+N\+TF}(fmt)
\begin{DoxyCompactList}\small\item\em function used by the library to print debug msgs \end{DoxyCompactList}\item 
\mbox{\label{ums__user__library_8h_a0fb4aa2351f869bd66e0d5ccb29716be}} 
\#define {\bfseries E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+M\+\_\+\+V\+AR}~1
\item 
\#define \textbf{ E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+P\+P\+R\+I\+N\+TF}(fmt, ...)
\begin{DoxyCompactList}\small\item\em function used by the library to print err msgs \end{DoxyCompactList}\item 
\#define \textbf{ E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+P\+R\+I\+N\+TF}(fmt)
\begin{DoxyCompactList}\small\item\em function used by the library to print err msgs \end{DoxyCompactList}\item 
\mbox{\label{ums__user__library_8h_a4f8307832bc006379b7285d799307f07}} 
\#define {\bfseries E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+E\+X\+E\+C\+\_\+\+M\+\_\+\+V\+AR}~0
\item 
\#define \textbf{ E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+E\+X\+E\+C\+\_\+\+P\+P\+R\+I\+N\+TF}(fmt, ...)
\begin{DoxyCompactList}\small\item\em function used by the library to print err\+\_\+exec msgs \end{DoxyCompactList}\item 
\#define \textbf{ E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+E\+X\+E\+C\+\_\+\+P\+R\+I\+N\+TF}(fmt)
\begin{DoxyCompactList}\small\item\em function used by the library to print err\+\_\+exec msgs \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \textbf{ ums\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em Initialize a new U\+MS. \end{DoxyCompactList}\item 
int \textbf{ ums\+\_\+close} (int fd)
\begin{DoxyCompactList}\small\item\em Release all the structures related to the fd U\+MS. \end{DoxyCompactList}\item 
int \textbf{ enter\+\_\+ums\+\_\+scheduling\+\_\+mode} (int fd, int($\ast$entry\+\_\+point)(void $\ast$), void $\ast$entrypoint\+\_\+args, ums\+\_\+pid\+\_\+t completion\+\_\+list\+\_\+id)
\begin{DoxyCompactList}\small\item\em Converts a standard pthread in a U\+MS Scheduler thread, the function takes as input a file descriptor, a completion list ID of worker threads and a entry point function. \end{DoxyCompactList}\item 
\textbf{ completion\+\_\+list\+\_\+data} $\ast$ \textbf{ dequeue\+\_\+ums\+\_\+completion\+\_\+list\+\_\+items} (int fd)
\begin{DoxyCompactList}\small\item\em called from the scheduler thread obtains a list of current available thread to be run, if no thread is available to be run the function should be blocking until a thread becomes available \end{DoxyCompactList}\item 
int \textbf{ execute\+\_\+ums\+\_\+thread} (int fd, ums\+\_\+pid\+\_\+t worker\+\_\+id, \textbf{ completion\+\_\+list\+\_\+data} $\ast$list\+\_\+data)
\begin{DoxyCompactList}\small\item\em called from a scheduler thread, it executes the passed worker thread by switching the entire context, if -\/E\+A\+C\+C\+ES or -\/E\+B\+A\+DF are returned try again with a different worker\+\_\+id. \end{DoxyCompactList}\item 
int \textbf{ ums\+\_\+thread\+\_\+yield} (int fd)
\begin{DoxyCompactList}\small\item\em called from a worker thread, it pauses the execution of the current thread and the U\+MS scheduler entry point is executed for determining the next thread to be scheduled; \end{DoxyCompactList}\item 
int \textbf{ exit\+\_\+worker\+\_\+thread} (int fd)
\begin{DoxyCompactList}\small\item\em This function must be called at the end of every \doxyref{worker\+\_\+thread}{p.}{dd/d5b/structworker__thread}. \end{DoxyCompactList}\item 
\textbf{ completion\+\_\+list\+\_\+data} $\ast$ \textbf{ create\+\_\+completion\+\_\+list} (int fd)
\begin{DoxyCompactList}\small\item\em Create a completion list object, the ID is located in create\+\_\+completion\+\_\+list-\/$>$id, in the case of readers/writers or publish/subscribe or master/slaves use 2 different \doxyref{completion\+\_\+list}{p.}{d0/dea/structcompletion__list} for the two groups of workers. \end{DoxyCompactList}\item 
int \textbf{ add\+\_\+worker\+\_\+thread} (int fd, int($\ast$work)(void $\ast$), void $\ast$\textbf{ args}, ums\+\_\+pid\+\_\+t completion\+\_\+list\+\_\+id)
\begin{DoxyCompactList}\small\item\em Create and add a worker thread to the desired completion list. \end{DoxyCompactList}\item 
int \textbf{ destroy\+\_\+comp\+\_\+list} (int fd, ums\+\_\+pid\+\_\+t completion\+\_\+list\+\_\+id)
\begin{DoxyCompactList}\small\item\em destroy the selected completion list \end{DoxyCompactList}\item 
int \textbf{ release\+\_\+ums} (int fd)
\begin{DoxyCompactList}\small\item\em destroy the U\+MS \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This library contains the definitions of every function that can be used from user space to interact with the U\+MS Scheduler device. 



\doxysubsection{Macro Definition Documentation}
\mbox{\label{ums__user__library_8h_a4cdd73c96d24bc16516d5256306d3cca}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!DEBUG\_USER\_DO\_PPRINTF@{DEBUG\_USER\_DO\_PPRINTF}}
\index{DEBUG\_USER\_DO\_PPRINTF@{DEBUG\_USER\_DO\_PPRINTF}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{DEBUG\_USER\_DO\_PPRINTF}
{\footnotesize\ttfamily \#define D\+E\+B\+U\+G\+\_\+\+U\+S\+E\+R\+\_\+\+D\+O\+\_\+\+P\+P\+R\+I\+N\+TF(\begin{DoxyParamCaption}\item[{}]{fmt,  }\item[{}]{... }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (DEBUG\_USER\_M\_VAR)               \(\backslash\)}
\DoxyCodeLine{    \{                                   \(\backslash\)}
\DoxyCodeLine{        printf(fmt, \#\#\_\_VA\_ARGS\_\_);     \(\backslash\)}
\DoxyCodeLine{    \}}

\end{DoxyCode}


function used by the library to print debug msgs 



Definition at line 21 of file ums\+\_\+user\+\_\+library.\+h.

\mbox{\label{ums__user__library_8h_aa240655debac72b43eb57b92ff08398c}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!DEBUG\_USER\_DO\_PRINTF@{DEBUG\_USER\_DO\_PRINTF}}
\index{DEBUG\_USER\_DO\_PRINTF@{DEBUG\_USER\_DO\_PRINTF}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{DEBUG\_USER\_DO\_PRINTF}
{\footnotesize\ttfamily \#define D\+E\+B\+U\+G\+\_\+\+U\+S\+E\+R\+\_\+\+D\+O\+\_\+\+P\+R\+I\+N\+TF(\begin{DoxyParamCaption}\item[{}]{fmt }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (DEBUG\_USER\_M\_VAR)         \(\backslash\)}
\DoxyCodeLine{    \{                             \(\backslash\)}
\DoxyCodeLine{        printf(fmt);              \(\backslash\)}
\DoxyCodeLine{    \}}

\end{DoxyCode}


function used by the library to print debug msgs 



Definition at line 30 of file ums\+\_\+user\+\_\+library.\+h.

\mbox{\label{ums__user__library_8h_a28095fb8a358ed328a9adb56fe83ff4b}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!ERR\_USER\_EXEC\_PPRINTF@{ERR\_USER\_EXEC\_PPRINTF}}
\index{ERR\_USER\_EXEC\_PPRINTF@{ERR\_USER\_EXEC\_PPRINTF}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{ERR\_USER\_EXEC\_PPRINTF}
{\footnotesize\ttfamily \#define E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+E\+X\+E\+C\+\_\+\+P\+P\+R\+I\+N\+TF(\begin{DoxyParamCaption}\item[{}]{fmt,  }\item[{}]{... }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (ERR\_USER\_EXEC\_M\_VAR)            \(\backslash\)}
\DoxyCodeLine{        printf(fmt, \#\#\_\_VA\_ARGS\_\_);}

\end{DoxyCode}


function used by the library to print err\+\_\+exec msgs 



Definition at line 58 of file ums\+\_\+user\+\_\+library.\+h.

\mbox{\label{ums__user__library_8h_a90d0ec61e15533d701e732d59ccab220}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!ERR\_USER\_EXEC\_PRINTF@{ERR\_USER\_EXEC\_PRINTF}}
\index{ERR\_USER\_EXEC\_PRINTF@{ERR\_USER\_EXEC\_PRINTF}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{ERR\_USER\_EXEC\_PRINTF}
{\footnotesize\ttfamily \#define E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+E\+X\+E\+C\+\_\+\+P\+R\+I\+N\+TF(\begin{DoxyParamCaption}\item[{}]{fmt }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (ERR\_USER\_EXEC\_M\_VAR)      \(\backslash\)}
\DoxyCodeLine{        printf(fmt);}

\end{DoxyCode}


function used by the library to print err\+\_\+exec msgs 



Definition at line 66 of file ums\+\_\+user\+\_\+library.\+h.

\mbox{\label{ums__user__library_8h_ae111dab6d7bdbc59a2417b4463cb7f66}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!ERR\_USER\_PPRINTF@{ERR\_USER\_PPRINTF}}
\index{ERR\_USER\_PPRINTF@{ERR\_USER\_PPRINTF}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{ERR\_USER\_PPRINTF}
{\footnotesize\ttfamily \#define E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+P\+P\+R\+I\+N\+TF(\begin{DoxyParamCaption}\item[{}]{fmt,  }\item[{}]{... }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (ERR\_USER\_M\_VAR)            \(\backslash\)}
\DoxyCodeLine{        printf(fmt, \#\#\_\_VA\_ARGS\_\_);}

\end{DoxyCode}


function used by the library to print err msgs 



Definition at line 40 of file ums\+\_\+user\+\_\+library.\+h.

\mbox{\label{ums__user__library_8h_abeffffcdd968b203cec1e2f761a8bd8a}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!ERR\_USER\_PRINTF@{ERR\_USER\_PRINTF}}
\index{ERR\_USER\_PRINTF@{ERR\_USER\_PRINTF}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{ERR\_USER\_PRINTF}
{\footnotesize\ttfamily \#define E\+R\+R\+\_\+\+U\+S\+E\+R\+\_\+\+P\+R\+I\+N\+TF(\begin{DoxyParamCaption}\item[{}]{fmt }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (ERR\_USER\_M\_VAR)      \(\backslash\)}
\DoxyCodeLine{        printf(fmt);}

\end{DoxyCode}


function used by the library to print err msgs 



Definition at line 48 of file ums\+\_\+user\+\_\+library.\+h.



\doxysubsection{Function Documentation}
\mbox{\label{ums__user__library_8h_afe2f0d0ca8323caa262fd1eb156ef43c}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!add\_worker\_thread@{add\_worker\_thread}}
\index{add\_worker\_thread@{add\_worker\_thread}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{add\_worker\_thread()}
{\footnotesize\ttfamily int add\+\_\+worker\+\_\+thread (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{int($\ast$)(void $\ast$)}]{work,  }\item[{void $\ast$}]{args,  }\item[{ums\+\_\+pid\+\_\+t}]{completion\+\_\+list\+\_\+id }\end{DoxyParamCaption})}



Create and add a worker thread to the desired completion list. 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS \\
\hline
{\em work} & pointer to a function that will be executed by the worker thread \\
\hline
{\em args} & argument that will be passed to work() \\
\hline
{\em completion\+\_\+list\+\_\+id} & unsigned long identifier for the completion list who will own this worker \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, -\/1 otherwise 
\end{DoxyReturn}


Definition at line 388 of file ums\+\_\+user\+\_\+library.\+c.

\mbox{\label{ums__user__library_8h_ad1664caed22994e959cdbbc7ab077a6b}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!create\_completion\_list@{create\_completion\_list}}
\index{create\_completion\_list@{create\_completion\_list}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{create\_completion\_list()}
{\footnotesize\ttfamily \textbf{ completion\+\_\+list\+\_\+data}$\ast$ create\+\_\+completion\+\_\+list (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}



Create a completion list object, the ID is located in create\+\_\+completion\+\_\+list-\/$>$id, in the case of readers/writers or publish/subscribe or master/slaves use 2 different \doxyref{completion\+\_\+list}{p.}{d0/dea/structcompletion__list} for the two groups of workers. 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
completion\+\_\+list\+\_\+data$\ast$ on success, N\+U\+LL otherwise 
\end{DoxyReturn}


Definition at line 371 of file ums\+\_\+user\+\_\+library.\+c.

\mbox{\label{ums__user__library_8h_a3801c2381d47b90abbb4416ccceb10a0}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!dequeue\_ums\_completion\_list\_items@{dequeue\_ums\_completion\_list\_items}}
\index{dequeue\_ums\_completion\_list\_items@{dequeue\_ums\_completion\_list\_items}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{dequeue\_ums\_completion\_list\_items()}
{\footnotesize\ttfamily \textbf{ completion\+\_\+list\+\_\+data}$\ast$ dequeue\+\_\+ums\+\_\+completion\+\_\+list\+\_\+items (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}



called from the scheduler thread obtains a list of current available thread to be run, if no thread is available to be run the function should be blocking until a thread becomes available 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
struct completionm\+\_\+list\+\_\+data$\ast$ pointer to a \doxyref{completion\+\_\+list\+\_\+data}{p.}{dd/d32/structcompletion__list__data} ~\newline
 
\end{DoxyReturn}


Definition at line 192 of file ums\+\_\+user\+\_\+library.\+c.

\mbox{\label{ums__user__library_8h_a8f86d4e2032c5ea0ae99a86f3605a349}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!destroy\_comp\_list@{destroy\_comp\_list}}
\index{destroy\_comp\_list@{destroy\_comp\_list}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{destroy\_comp\_list()}
{\footnotesize\ttfamily int destroy\+\_\+comp\+\_\+list (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{ums\+\_\+pid\+\_\+t}]{completion\+\_\+list\+\_\+id }\end{DoxyParamCaption})}



destroy the selected completion list 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS \\
\hline
{\em completion\+\_\+list\+\_\+id} & ID of the completion list to destroy \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, -\/1 otherwise 
\end{DoxyReturn}


Definition at line 413 of file ums\+\_\+user\+\_\+library.\+c.

\mbox{\label{ums__user__library_8h_a1af25d3a8801258480c8d12f142d8b77}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!enter\_ums\_scheduling\_mode@{enter\_ums\_scheduling\_mode}}
\index{enter\_ums\_scheduling\_mode@{enter\_ums\_scheduling\_mode}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{enter\_ums\_scheduling\_mode()}
{\footnotesize\ttfamily int enter\+\_\+ums\+\_\+scheduling\+\_\+mode (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{int($\ast$)(void $\ast$)}]{entry\+\_\+point,  }\item[{void $\ast$}]{entrypoint\+\_\+args,  }\item[{ums\+\_\+pid\+\_\+t}]{completion\+\_\+list\+\_\+id }\end{DoxyParamCaption})}



Converts a standard pthread in a U\+MS Scheduler thread, the function takes as input a file descriptor, a completion list ID of worker threads and a entry point function. 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS schduler \\
\hline
{\em entry\+\_\+point} & Pointer to a Scheduling function \\
\hline
{\em completion\+\_\+list\+\_\+id} & ID of a completion list that will be schedule on this U\+MS Scheduler thread \\
\hline
{\em entrypoint\+\_\+args} & pointer to entry\+\_\+point funtion\textquotesingle{}s parameters \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int returns 0 on success, -\/1 otherwise 
\end{DoxyReturn}


Definition at line 155 of file ums\+\_\+user\+\_\+library.\+c.

\mbox{\label{ums__user__library_8h_a93fb4f479e87b611e5d565aa59342ea9}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!execute\_ums\_thread@{execute\_ums\_thread}}
\index{execute\_ums\_thread@{execute\_ums\_thread}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{execute\_ums\_thread()}
{\footnotesize\ttfamily int execute\+\_\+ums\+\_\+thread (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{ums\+\_\+pid\+\_\+t}]{worker\+\_\+id,  }\item[{\textbf{ completion\+\_\+list\+\_\+data} $\ast$}]{list\+\_\+data }\end{DoxyParamCaption})}



called from a scheduler thread, it executes the passed worker thread by switching the entire context, if -\/E\+A\+C\+C\+ES or -\/E\+B\+A\+DF are returned try again with a different worker\+\_\+id. 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS \\
\hline
{\em worker\+\_\+id} & id of the worker to be executed, the id is contenuto in the struct \doxyref{ums\+\_\+worker\+\_\+thread\+\_\+data}{p.}{d2/d14/structums__worker__thread__data} contenua in the struct completion\+\_\+list\+\_\+data-\/$>$head \\
\hline
{\em list\+\_\+data} & pointer to the \doxyref{completion\+\_\+list}{p.}{d0/dea/structcompletion__list} retrived from the dequeue, this list will be free \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int returns job\textquotesingle{}s return value on success, -\/E\+B\+A\+DF or -\/E\+A\+C\+C\+ES if a worker is already running, err otherwise 
\end{DoxyReturn}


Definition at line 256 of file ums\+\_\+user\+\_\+library.\+c.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=344pt]{da/dff/ums__user__library_8h_a93fb4f479e87b611e5d565aa59342ea9_cgraph}
\end{center}
\end{figure}
\mbox{\label{ums__user__library_8h_a71adff8e748b707700456d9bfd708843}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!exit\_worker\_thread@{exit\_worker\_thread}}
\index{exit\_worker\_thread@{exit\_worker\_thread}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{exit\_worker\_thread()}
{\footnotesize\ttfamily int exit\+\_\+worker\+\_\+thread (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}



This function must be called at the end of every \doxyref{worker\+\_\+thread}{p.}{dd/d5b/structworker__thread}. 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int return 0 on success, -\/1 otherwise 
\end{DoxyReturn}


Definition at line 336 of file ums\+\_\+user\+\_\+library.\+c.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=344pt]{da/dff/ums__user__library_8h_a71adff8e748b707700456d9bfd708843_icgraph}
\end{center}
\end{figure}
\mbox{\label{ums__user__library_8h_a2e9820305e1f5b9236a72de3fe138100}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!release\_ums@{release\_ums}}
\index{release\_ums@{release\_ums}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{release\_ums()}
{\footnotesize\ttfamily int release\+\_\+ums (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}



destroy the U\+MS 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, -\/1 otherwise 
\end{DoxyReturn}


Definition at line 429 of file ums\+\_\+user\+\_\+library.\+c.

\mbox{\label{ums__user__library_8h_aedb0b4f41aea43769873bf1f18071226}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!ums\_close@{ums\_close}}
\index{ums\_close@{ums\_close}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{ums\_close()}
{\footnotesize\ttfamily int ums\+\_\+close (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}



Release all the structures related to the fd U\+MS. 

\begin{DoxyReturn}{Returns}
int return 0 on success, -\/1 otherwise 
\end{DoxyReturn}


Definition at line 136 of file ums\+\_\+user\+\_\+library.\+c.

\mbox{\label{ums__user__library_8h_a47a049fac8d1493860655164be5b38c0}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!ums\_init@{ums\_init}}
\index{ums\_init@{ums\_init}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{ums\_init()}
{\footnotesize\ttfamily int ums\+\_\+init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize a new U\+MS. 

\begin{DoxyReturn}{Returns}
int returns the file descriptor of the device driver, -\/1 otherwise 
\end{DoxyReturn}


Definition at line 124 of file ums\+\_\+user\+\_\+library.\+c.

\mbox{\label{ums__user__library_8h_a24612f293a3f56702f8776d082063d57}} 
\index{ums\_user\_library.h@{ums\_user\_library.h}!ums\_thread\_yield@{ums\_thread\_yield}}
\index{ums\_thread\_yield@{ums\_thread\_yield}!ums\_user\_library.h@{ums\_user\_library.h}}
\doxysubsubsection{ums\_thread\_yield()}
{\footnotesize\ttfamily int ums\+\_\+thread\+\_\+yield (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}



called from a worker thread, it pauses the execution of the current thread and the U\+MS scheduler entry point is executed for determining the next thread to be scheduled; 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor related to the U\+MS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int return 0 on success, -\/1 otherwise 
\end{DoxyReturn}


Definition at line 296 of file ums\+\_\+user\+\_\+library.\+c.

