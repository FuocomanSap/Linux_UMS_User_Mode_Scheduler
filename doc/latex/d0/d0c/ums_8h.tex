\doxysection{Module/ums.h File Reference}
\label{ums_8h}\index{Module/ums.h@{Module/ums.h}}


Contains the functions to interact from user space with the kernel module.  


{\ttfamily \#include $<$linux/slab.\+h$>$}\newline
{\ttfamily \#include $<$linux/init.\+h$>$}\newline
{\ttfamily \#include $<$linux/module.\+h$>$}\newline
{\ttfamily \#include $<$linux/device.\+h$>$}\newline
{\ttfamily \#include $<$linux/kfifo.\+h$>$}\newline
{\ttfamily \#include \char`\"{}module\+\_\+library.\+h\char`\"{}}\newline
Include dependency graph for ums.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/dce/ums_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/d36/ums_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \textbf{ ums\+\_\+dev\+\_\+open} (struct inode $\ast$inodep, struct file $\ast$filep)
\begin{DoxyCompactList}\small\item\em Used to create a new U\+MS scheduler. \end{DoxyCompactList}\item 
int \textbf{ ums\+\_\+dev\+\_\+release} (struct inode $\ast$inodep, struct file $\ast$filep)
\begin{DoxyCompactList}\small\item\em Function not implemented, to close call the ioctl(\+D\+E\+S\+T\+R\+O\+Y\+\_\+\+C\+O\+M\+P\+\_\+\+L\+I\+S\+T) and then ioctl(\+R\+E\+L\+E\+A\+S\+E\+\_\+\+U\+M\+S) \end{DoxyCompactList}\item 
long \textbf{ ums\+\_\+dev\+\_\+ioctls} (struct file $\ast$filep, unsigned int cmd, unsigned long arg)
\begin{DoxyCompactList}\small\item\em This function wraps\+: all the ioctls declared in \doxyref{Common.\+h}{p.}{dc/d33/Common_8h}. \end{DoxyCompactList}\item 
char $\ast$ \textbf{ retrive\+\_\+worker\+\_\+thread\+\_\+proc} (time64\+\_\+t pid)
\begin{DoxyCompactList}\small\item\em retrives the info of a worker thread and puts it in a buffer \end{DoxyCompactList}\item 
char $\ast$ \textbf{ retrive\+\_\+schduler\+\_\+thread\+\_\+proc} (time64\+\_\+t pid)
\begin{DoxyCompactList}\small\item\em retrive the info of a schduler thread and puts it in a buffer \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Contains the functions to interact from user space with the kernel module. 



\doxysubsection{Function Documentation}
\mbox{\label{ums_8h_a120705ab9799d49f6c19332b2d00fd0d}} 
\index{ums.h@{ums.h}!retrive\_schduler\_thread\_proc@{retrive\_schduler\_thread\_proc}}
\index{retrive\_schduler\_thread\_proc@{retrive\_schduler\_thread\_proc}!ums.h@{ums.h}}
\doxysubsubsection{retrive\_schduler\_thread\_proc()}
{\footnotesize\ttfamily char$\ast$ retrive\+\_\+schduler\+\_\+thread\+\_\+proc (\begin{DoxyParamCaption}\item[{time64\+\_\+t}]{pid }\end{DoxyParamCaption})}



retrive the info of a schduler thread and puts it in a buffer 


\begin{DoxyParams}{Parameters}
{\em pid} & the selected schduler thread\textquotesingle{}s id \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
char$\ast$ !=N\+U\+LL on success, N\+U\+LL otherwise 
\end{DoxyReturn}


Definition at line 743 of file ums.\+c.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d0c/ums_8h_a120705ab9799d49f6c19332b2d00fd0d_cgraph}
\end{center}
\end{figure}
\mbox{\label{ums_8h_a8b7f67d5f34fc1e564c20518972f263f}} 
\index{ums.h@{ums.h}!retrive\_worker\_thread\_proc@{retrive\_worker\_thread\_proc}}
\index{retrive\_worker\_thread\_proc@{retrive\_worker\_thread\_proc}!ums.h@{ums.h}}
\doxysubsubsection{retrive\_worker\_thread\_proc()}
{\footnotesize\ttfamily char$\ast$ retrive\+\_\+worker\+\_\+thread\+\_\+proc (\begin{DoxyParamCaption}\item[{time64\+\_\+t}]{pid }\end{DoxyParamCaption})}



retrives the info of a worker thread and puts it in a buffer 


\begin{DoxyParams}{Parameters}
{\em pid} & the selected worker id \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
char$\ast$ !=N\+U\+LL on success, N\+U\+LL otherwise 
\end{DoxyReturn}


Definition at line 655 of file ums.\+c.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d0c/ums_8h_a8b7f67d5f34fc1e564c20518972f263f_cgraph}
\end{center}
\end{figure}
\mbox{\label{ums_8h_ae04231a364e701a8767628b1c6e04222}} 
\index{ums.h@{ums.h}!ums\_dev\_ioctls@{ums\_dev\_ioctls}}
\index{ums\_dev\_ioctls@{ums\_dev\_ioctls}!ums.h@{ums.h}}
\doxysubsubsection{ums\_dev\_ioctls()}
{\footnotesize\ttfamily long ums\+\_\+dev\+\_\+ioctls (\begin{DoxyParamCaption}\item[{struct file $\ast$}]{filep,  }\item[{unsigned int}]{cmd,  }\item[{unsigned long}]{arg }\end{DoxyParamCaption})}



This function wraps\+: all the ioctls declared in \doxyref{Common.\+h}{p.}{dc/d33/Common_8h}. 


\begin{DoxyParams}{Parameters}
{\em filep} & \\
\hline
{\em cmd} & the I\+O\+C\+TL defined in \doxyref{Common.\+h}{p.}{dc/d33/Common_8h} \\
\hline
{\em arg} & used to copy\+\_\+from/copy\+\_\+to user space \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
long 
\end{DoxyReturn}
E\+N\+T\+E\+R\+\_\+\+U\+M\+S\+\_\+\+S\+C\+H\+E\+D\+U\+L\+I\+N\+G\+\_\+\+M\+O\+DE

reads from args $\ast$sched\+\_\+thread\+\_\+data with\+: -\/entrypoint -\/\doxyref{args(for the entry point)}{p.}{d8/d08/structargs} -\/the completion list id

Then call create\+\_\+ums\+\_\+thread.

returns 0 on success, err otherwise, the errno is setteed

U\+M\+S\+\_\+\+T\+H\+R\+E\+A\+D\+\_\+\+Y\+I\+E\+LD

called from a worker thread, it pauses the execution of the current thread and the U\+MS scheduler entry point is executed for determining the next thread to be scheduled;

Takes as input $\ast$sched\+\_\+thread\+\_\+data fill it with $\ast$entry\+\_\+point and $\ast$args The worker will be set to Y\+I\+E\+LD

errno\+:
\begin{DoxyItemize}
\item E\+B\+U\+SY, no other workers, this mean that you should just call the E\+X\+I\+T\+\_\+\+F\+R\+O\+M\+\_\+\+Y\+I\+E\+LD
\item E\+A\+G\+A\+IN, worker found, you have to call the entrypoint before call the E\+X\+I\+T\+\_\+\+F\+R\+O\+M\+\_\+\+Y\+I\+E\+LD
\end{DoxyItemize}

Definition at line 195 of file ums.\+c.

\mbox{\label{ums_8h_afa5f72d3c03eeccad43dc77a26fbd52a}} 
\index{ums.h@{ums.h}!ums\_dev\_open@{ums\_dev\_open}}
\index{ums\_dev\_open@{ums\_dev\_open}!ums.h@{ums.h}}
\doxysubsubsection{ums\_dev\_open()}
{\footnotesize\ttfamily int ums\+\_\+dev\+\_\+open (\begin{DoxyParamCaption}\item[{struct inode $\ast$}]{inodep,  }\item[{struct file $\ast$}]{filep }\end{DoxyParamCaption})}



Used to create a new U\+MS scheduler. 


\begin{DoxyParams}{Parameters}
{\em inodep} & \\
\hline
{\em filep} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, err otherwise 
\end{DoxyReturn}


Definition at line 125 of file ums.\+c.

\mbox{\label{ums_8h_a694de77fbd0b5998683c10a7f31d89c3}} 
\index{ums.h@{ums.h}!ums\_dev\_release@{ums\_dev\_release}}
\index{ums\_dev\_release@{ums\_dev\_release}!ums.h@{ums.h}}
\doxysubsubsection{ums\_dev\_release()}
{\footnotesize\ttfamily int ums\+\_\+dev\+\_\+release (\begin{DoxyParamCaption}\item[{struct inode $\ast$}]{inodep,  }\item[{struct file $\ast$}]{filep }\end{DoxyParamCaption})}



Function not implemented, to close call the ioctl(\+D\+E\+S\+T\+R\+O\+Y\+\_\+\+C\+O\+M\+P\+\_\+\+L\+I\+S\+T) and then ioctl(\+R\+E\+L\+E\+A\+S\+E\+\_\+\+U\+M\+S) 


\begin{DoxyParams}{Parameters}
{\em inodep} & \\
\hline
{\em filep} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, err otherwise 
\end{DoxyReturn}


Definition at line 186 of file ums.\+c.

